<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZALABIA & DONUTS â€” Menu</title>
<link rel="icon" href="https://nol.pages.dev/sec/donicon.png" />
<meta name="description" content="Ù‚Ø§Ø¦Ù…Ø© Zalabia & Donuts â€” Arabic first â€¢ Phone-first â€¢ Premium UI" />
<style>
/* THEME */
:root{
  --bg-img: url('https://nol.pages.dev/srs/don.png');
  --pale-pink:#fff3f6;
  --dark-pink:#ff5f85;       /* primary */
  --deep-pink:#ff2e63;
  --light-orange:#ffb470;    /* subtle accent ~7% */
  --card:#ffffff;
  --muted:#6f5f66;
  --text:#222;
  --glass: rgba(255,255,255,0.75);
  --radius-lg:18px;
  --radius-md:12px;
  --shadow-lg: 0 18px 50px rgba(34,20,30,0.08);
  --shadow-sm: 0 8px 24px rgba(34,20,30,0.06);
  --transition: 220ms cubic-bezier(.2,.9,.3,1);
}

/* BASE */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  -webkit-font-smoothing:antialiased;
  background:
    linear-gradient(180deg, rgba(255,246,249,0.92), rgba(255,250,248,0.95)),
    var(--bg-img);
  background-size:cover;
  background-position:center;
  padding-bottom:140px;
  color:var(--text);
}

/* HEADER */
.header{position:sticky; top:0; z-index:90; display:flex; align-items:center; gap:12px; padding:12px 16px; backdrop-filter: blur(6px); background:linear-gradient(90deg, rgba(255,95,133,0.06), rgba(255,180,112,0.03)); border-bottom:1px solid rgba(0,0,0,0.03)}
.logo{width:52px;height:52px;border-radius:14px;background:linear-gradient(135deg,var(--dark-pink),var(--light-orange));display:flex;align-items:center;justify-content:center;color:white;font-weight:900;box-shadow:0 10px 28px rgba(255,95,133,0.12)}
.brand-title h1{margin:0;font-size:16px;font-weight:900}
.brand-title p{margin:0;font-size:12px;color:var(--muted)}

/* Search */
.header-controls{display:flex;gap:10px;align-items:center;flex:1;justify-content:flex-end}
.search{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:var(--glass);min-width:220px;max-width:640px;border:1px solid rgba(0,0,0,0.03)}
.search input{border:0;outline:0;background:transparent;width:100%;font-size:14px}

/* LAYOUT */
.container{max-width:1100px;margin:14px auto;padding:0 16px}

/* CATEGORIES */
.cats{display:flex;gap:8px;overflow:auto;padding:10px 0;margin-bottom:12px}
.cat{flex:0 0 auto;padding:8px 12px;border-radius:999px;background:transparent;border:1px solid rgba(0,0,0,0.04);cursor:pointer;font-weight:800;color:var(--muted);transition:all var(--transition)}
.cat.active{background:linear-gradient(90deg,var(--dark-pink),var(--light-orange));color:#fff;transform:translateY(-4px);box-shadow:var(--shadow-sm)}

/* GRID */
.grid{display:grid;gap:12px;grid-template-columns:1fr}
@media(min-width:920px){ .grid{grid-template-columns:repeat(2,1fr)} }

.card{background:linear-gradient(180deg, rgba(255,255,255,0.96), #fff);border-radius:var(--radius-lg);padding:14px;box-shadow:var(--shadow-lg);display:flex;gap:12px;align-items:flex-start;transition:transform var(--transition)}
.card:hover{transform:translateY(-8px)}

.info{flex:1}
.title-main{display:flex;justify-content:space-between;align-items:flex-start;gap:8px}
.name-ar{font-weight:900;font-size:16px}
.name-en{font-size:12px;color:var(--muted);margin-top:6px}
.variants{margin-top:12px;display:flex;flex-wrap:wrap;gap:8px}
.variant-pill{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:999px;background:linear-gradient(180deg,#fff,var(--pale-pink));border:1px solid rgba(0,0,0,0.03);min-width:140px;font-weight:800;font-size:13px;color:var(--dark-pink);box-shadow:0 6px 20px rgba(255,95,133,0.04)}
.variant-pill small{display:block;color:var(--muted);font-weight:600}

/* Right controls */
.controls-side{min-width:160px;display:flex;flex-direction:column;align-items:flex-end;gap:8px}
.price{font-weight:900;color:var(--dark-pink);font-size:18px}
.inline-qty{display:flex;gap:8px;align-items:center;background:linear-gradient(90deg,#fff,var(--pale-pink));padding:6px;border-radius:999px;border:1px solid rgba(0,0,0,0.03)}
.qbtn{width:38px;height:38px;border-radius:999px;border:0;background:transparent;font-weight:900;color:var(--dark-pink);cursor:pointer}
.add-btn{width:100%;padding:10px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--dark-pink),var(--light-orange));color:#fff;font-weight:900;cursor:pointer;box-shadow:0 14px 40px rgba(255,95,133,0.12)}

/* FLOATING CART */
.cart-float{position:fixed;left:20px;bottom:20px;z-index:9999;background:linear-gradient(90deg,var(--dark-pink),var(--light-orange));color:white;padding:12px 16px;border-radius:999px;display:flex;gap:10px;align-items:center;cursor:pointer;box-shadow:var(--shadow-lg)}
.cart-count{background:white;color:var(--dark-pink);padding:4px 10px;border-radius:999px;font-weight:900}

/* DRAWER */
.drawer{position:fixed;right:0;left:0;bottom:0;transform:translateY(120%);transition:transform .32s cubic-bezier(.2,.9,.3,1);z-index:9998}
.drawer.show{transform:translateY(0)}
.drawer-panel{background:linear-gradient(180deg, rgba(255,255,255,0.98), #fff);border-top-left-radius:18px;border-top-right-radius:18px;padding:16px;max-height:80vh;overflow:auto;box-shadow:0 -20px 60px rgba(10,10,10,0.06)}
.cart-item{display:flex;justify-content:space-between;gap:12px;padding:10px 0;border-bottom:1px dashed rgba(0,0,0,0.05)}
.cart-item .meta{max-width:60%}
.cart-total{display:flex;justify-content:space-between;align-items:center;padding-top:12px;font-weight:900}
.remove-btn{background:transparent;border:0;color:var(--muted);cursor:pointer;font-weight:800}

/* STICKY BOTTOM ORDER (mobile) */
.sticky-order{position:fixed;right:16px;left:16px;bottom:16px;z-index:9997;display:none}
@media(max-width:920px){ .sticky-order{display:block} }
.order-bar{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(90deg,var(--dark-pink),var(--light-orange));color:#fff;font-weight:900;box-shadow:0 18px 50px rgba(34,20,30,0.12)}

/* TOAST */
.toast{position:fixed;right:20px;bottom:90px;background:#111;color:#fff;padding:12px 16px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.3);opacity:0;transform:translateY(12px);transition:all .28s cubic-bezier(.2,.9,.3,1);z-index:99999}
.toast.show{opacity:1;transform:translateY(0)}

/* FOOTER */
footer{padding:20px;text-align:center;color:var(--muted);font-size:13px;margin-top:18px}
.footer-links a{color:var(--dark-pink);text-decoration:none;margin:0 6px;font-weight:800}
</style>
</head>
<body>

<!-- APP DATA (FULL MENU as provided) -->
<script>
const CONTACT = { local: "01125263455", full: "201125263455" };
const TIKTOK_URL = "https://www.tiktok.com/@zalabiaanddounts?_r=1&_t=ZS-94001VJ1Acm";

const MENU_DATA = [
  /* Donuts */
  { id:"don_nutella", cat:"Donuts", name_ar:"Ù†ÙˆØªÙŠÙ„Ø§", name_en:"Nutella", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_whitechoc", cat:"Donuts", name_ar:"Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", name_en:"White Chocolate", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_lotus", cat:"Donuts", name_ar:"Ù„ÙˆØªØ³", name_en:"Lotus", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_caramel", cat:"Donuts", name_ar:"ÙƒØ±Ø§Ù…ÙŠÙ„", name_en:"Caramel", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_blueberry", cat:"Donuts", name_ar:"ØªÙˆØª Ø£Ø²Ø±Ù‚", name_en:"Blueberry", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_strawberry", cat:"Donuts", name_ar:"ÙØ±Ø§ÙˆÙ„Ø©", name_en:"Strawberry", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_ferrero", cat:"Donuts", name_ar:"ÙÙŠØ±ÙŠØ±Ùˆ Ø±ÙˆØ´ÙŠÙ‡", name_en:"Ferrero Rocher", variants:[ {label:"Single",price:40},{label:"Double",price:60} ] },
  { id:"don_kinder", cat:"Donuts", name_ar:"ÙƒÙŠÙ†Ø¯Ø±", name_en:"Kinder", variants:[ {label:"Single",price:40},{label:"Double",price:60} ] },
  { id:"don_dark", cat:"Donuts", name_ar:"Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª", name_en:"Dark Chocolate", variants:[ {label:"Single",price:40},{label:"Double",price:60} ] },
  { id:"don_yogurt", cat:"Donuts", name_ar:"Ø²Ø¨Ø§Ø¯ÙŠ", name_en:"Yogurt", variants:[ {label:"Single",price:40},{label:"Double",price:60} ] },
  { id:"don_bubblegum", cat:"Donuts", name_ar:"Ù„Ø¨Ø§Ù†", name_en:"Bubblegum", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },
  { id:"don_cotton", cat:"Donuts", name_ar:"ØºØ²Ù„ Ø§Ù„Ø¨Ù†Ø§Øª", name_en:"Cotton Candy", variants:[ {label:"Single",price:35},{label:"Double",price:50} ] },

  /* Waffle */
  { id:"w_nutella", cat:"Waffle", name_ar:"Ù†ÙˆØªÙŠÙ„Ø§", name_en:"Nutella Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_whitechoc", cat:"Waffle", name_ar:"Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡", name_en:"White Chocolate Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_oreo", cat:"Waffle", name_ar:"Ø§ÙˆØ±ÙŠÙˆ", name_en:"Oreo Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_blueberry", cat:"Waffle", name_ar:"ØªÙˆØª Ø£Ø²Ø±Ù‚", name_en:"Blueberry Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_strawberry", cat:"Waffle", name_ar:"ÙØ±Ø§ÙˆÙ„Ø©", name_en:"Strawberry Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_lotus", cat:"Waffle", name_ar:"Ù„ÙˆØªØ³", name_en:"Lotus Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_caramel", cat:"Waffle", name_ar:"ÙƒØ±Ø§Ù…ÙŠÙ„", name_en:"Caramel Waffle", variants:[ {label:"Single",price:35} ] },
  { id:"w_ferrero", cat:"Waffle", name_ar:"ÙÙŠØ±ÙŠØ±Ùˆ Ø±ÙˆØ´ÙŠÙ‡", name_en:"Ferrero Waffle", variants:[ {label:"Single",price:40} ] },
  { id:"w_kinder", cat:"Waffle", name_ar:"ÙƒÙŠÙ†Ø¯Ø±", name_en:"Kinder Waffle", variants:[ {label:"Single",price:40} ] },
  { id:"w_yogurt", cat:"Waffle", name_ar:"Ø²Ø¨Ø§Ø¯ÙŠ", name_en:"Yogurt Waffle", variants:[ {label:"Single",price:40} ] },
  { id:"w_dark", cat:"Waffle", name_ar:"Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª", name_en:"Dark Chocolate Waffle", variants:[ {label:"Single",price:40} ] },
  { id:"w_cotton", cat:"Waffle", name_ar:"ØºØ²Ù„ Ø§Ù„Ø¨Ù†Ø§Øª", name_en:"Cotton Candy Waffle", variants:[ {label:"Single",price:40} ] },
  { id:"w_bubblegum", cat:"Waffle", name_ar:"Ù„Ø¨Ø§Ù†", name_en:"Bubblegum Waffle", variants:[ {label:"Single",price:35} ] },

  /* Mini Pancake (sizes are variants; flavors chosen on add) */
  { id:"mini_10", cat:"Mini Pancake", name_ar:"Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ù†ÙƒÙŠÙƒ â€” 10 Ù‚Ø·Ø¹", name_en:"Mini Pancake (10 pcs)", variants:[ {label:"10",price:40} ], flavors:["Ù†ÙˆØªÙŠÙ„Ø§","Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡","Ù„ÙˆØªØ³","ÙƒØ±Ø§Ù…ÙŠÙ„","ØªÙˆØª Ø£Ø²Ø±Ù‚","ÙØ±Ø§ÙˆÙ„Ø©","ÙƒÙŠÙ†Ø¯Ø±","Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª"] },
  { id:"mini_15", cat:"Mini Pancake", name_ar:"Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ù†ÙƒÙŠÙƒ â€” 15 Ù‚Ø·Ø¹", name_en:"Mini Pancake (15 pcs)", variants:[ {label:"15",price:60} ], flavors:["Ù†ÙˆØªÙŠÙ„Ø§","Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡","Ù„ÙˆØªØ³","ÙƒØ±Ø§Ù…ÙŠÙ„","ØªÙˆØª Ø£Ø²Ø±Ù‚","ÙØ±Ø§ÙˆÙ„Ø©","ÙƒÙŠÙ†Ø¯Ø±","Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª"] },
  { id:"mini_20", cat:"Mini Pancake", name_ar:"Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ù†ÙƒÙŠÙƒ â€” 20 Ù‚Ø·Ø¹", name_en:"Mini Pancake (20 pcs)", variants:[ {label:"20",price:70} ], flavors:["Ù†ÙˆØªÙŠÙ„Ø§","Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡","Ù„ÙˆØªØ³","ÙƒØ±Ø§Ù…ÙŠÙ„","ØªÙˆØª Ø£Ø²Ø±Ù‚","ÙØ±Ø§ÙˆÙ„Ø©","ÙƒÙŠÙ†Ø¯Ø±","Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª"] },
  { id:"mini_25", cat:"Mini Pancake", name_ar:"Ù…ÙŠÙ†ÙŠ Ø¨Ø§Ù†ÙƒÙŠÙƒ â€” 25 Ù‚Ø·Ø¹", name_en:"Mini Pancake (25 pcs)", variants:[ {label:"25",price:80} ], flavors:["Ù†ÙˆØªÙŠÙ„Ø§","Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø¨ÙŠØ¶Ø§Ø¡","Ù„ÙˆØªØ³","ÙƒØ±Ø§Ù…ÙŠÙ„","ØªÙˆØª Ø£Ø²Ø±Ù‚","ÙØ±Ø§ÙˆÙ„Ø©","ÙƒÙŠÙ†Ø¯Ø±","Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª"] },

  /* Zalabia */
  { id:"zal_sugar", cat:"Zalabia", name_ar:"Ø³ÙƒØ±", name_en:"Sugar", variants:[ {label:"S",price:30},{label:"M",price:40},{label:"L",price:60},{label:"XL",price:100} ] },
  { id:"zal_honey", cat:"Zalabia", name_ar:"Ø¹Ø³Ù„", name_en:"Honey", variants:[ {label:"S",price:30},{label:"M",price:40},{label:"L",price:60},{label:"XL",price:100} ] },
  { id:"zal_nutella", cat:"Zalabia", name_ar:"Ù†ÙˆØªÙŠÙ„Ø§", name_en:"Nutella", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_lotus", cat:"Zalabia", name_ar:"Ù„ÙˆØªØ³", name_en:"Lotus", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_caramel", cat:"Zalabia", name_ar:"ÙƒØ±Ø§Ù…ÙŠÙ„", name_en:"Caramel", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_blueberry", cat:"Zalabia", name_ar:"ØªÙˆØª Ø£Ø²Ø±Ù‚", name_en:"Blueberry", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_strawberry", cat:"Zalabia", name_ar:"ÙØ±Ø§ÙˆÙ„Ø©", name_en:"Strawberry", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_white", cat:"Zalabia", name_ar:"ÙˆØ§ÙŠØª Ø´ÙˆÙƒÙ„ÙŠØª", name_en:"White Chocolate", variants:[ {label:"S",price:35},{label:"M",price:50},{label:"L",price:80},{label:"XL",price:120} ] },
  { id:"zal_dark", cat:"Zalabia", name_ar:"Ø¯Ø§Ø±Ùƒ Ø´ÙˆÙƒÙ„ÙŠØª", name_en:"Dark Chocolate", variants:[ {label:"S",price:40},{label:"M",price:60},{label:"L",price:100},{label:"XL",price:150} ] },
  { id:"zal_kinder", cat:"Zalabia", name_ar:"ÙƒÙŠÙ†Ø¯Ø±", name_en:"Kinder", variants:[ {label:"S",price:40},{label:"M",price:60},{label:"L",price:100},{label:"XL",price:150} ] },

  /* Ice Coffee */
  { id:"ic_dark", cat:"Ice Coffee", name_ar:"Ø¯Ø§Ø±Ùƒ", name_en:"Dark", variants:[ {label:"single",price:50} ] },
  { id:"ic_caramel", cat:"Ice Coffee", name_ar:"ÙƒØ±Ø§Ù…ÙŠÙ„", name_en:"Caramel", variants:[ {label:"single",price:50} ] },
  { id:"ic_classic", cat:"Ice Coffee", name_ar:"ÙƒÙ„Ø§Ø³ÙŠÙƒ", name_en:"Classic", variants:[ {label:"single",price:50} ] }
];
</script>

<!-- HEADER -->
<header class="header">
  <div style="display:flex;align-items:center;gap:12px">
    <div class="logo">Z</div>
    <div class="brand-title">
      <h1>ZALABIA & DONUTS</h1>
      <p>Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø®Ø±Ø© â€” Arabic First â€¢ Phone-First</p>
    </div>
  </div>

  <div class="header-controls" style="flex:1;justify-content:flex-end">
    <div class="search" role="search" aria-label="Ø§Ø¨Ø­Ø«">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.7"><path d="M21 21l-4.35-4.35" stroke="#333" stroke-width="1.6" stroke-linecap="round"/></svg>
      <input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ØµÙ†Ù Ø£Ùˆ Ù†ÙƒÙ‡Ø© â€” Search..." />
    </div>
  </div>
</header>

<main class="container">
  <div id="cats" class="cats" aria-hidden="false"></div>
  <section id="grid" class="grid" aria-live="polite"></section>
</main>

<!-- FLOATING CART -->
<div class="cart-float" id="cartFloat" onclick="toggleDrawer()">
  <div style="display:flex;flex-direction:column">
    <div style="font-size:12px;opacity:.95">Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</div>
    <div style="font-weight:900">ZALABIA & DONUTS</div>
  </div>
  <div style="flex:1"></div>
  <div class="cart-count" id="cartCount">0</div>
</div>

<!-- DRAWER -->
<div id="drawer" class="drawer" aria-hidden="true">
  <div class="drawer-panel">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div style="font-weight:900">Ø·Ù„Ø¨Ùƒ</div>
        <div style="color:var(--muted);font-size:13px">Ø§Ø¶Ø¨Ø· Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø«Ù… Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø·Ù„Ø¨</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button onclick="clearCart()" style="background:transparent;border:0;color:var(--muted);font-weight:800">Ù…Ø³Ø­</button>
        <button onclick="toggleDrawer()" style="background:transparent;border:0;color:var(--muted);font-weight:800">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>

    <div id="cartList" style="margin-top:12px"></div>

    <div style="margin-top:12px" class="cart-total">
      <div style="font-weight:900;font-size:18px">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">0 Ø¬.Ù…</span></div>
      <div style="display:flex;flex-direction:column;gap:8px;min-width:180px">
        <button onclick="orderWhatsApp()" style="background:#25D366;color:#fff;padding:12px;border-radius:10px;border:0;font-weight:900">ğŸ’¬ Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button onclick="orderPhone()" style="background:var(--light-orange);color:#fff;padding:12px;border-radius:10px;border:0;font-weight:900">ğŸ“ Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø±</button>
      </div>
    </div>
  </div>
</div>

<!-- STICKY ORDER BAR (mobile) -->
<div class="sticky-order" aria-hidden="false">
  <div class="order-bar">
    <div>
      <div style="font-weight:900" id="stickyTotal">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 Ø¬.Ù…</div>
      <div style="font-size:12px;opacity:.9">Ø§Ø¶ØºØ· Ù„ÙØªØ­ Ø§Ù„Ø³Ù„Ø© Ø£Ùˆ Ø§Ø·Ù„Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button onclick="orderWhatsApp()" style="background:#25D366;color:#fff;padding:10px;border-radius:10px;border:0;font-weight:900">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
      <button onclick="toggleDrawer()" style="background:rgba(255,255,255,0.12);color:#fff;padding:10px;border-radius:10px;border:0;font-weight:900">Ø³Ù„Ø©</button>
    </div>
  </div>
</div>

<!-- TOAST UNDO -->
<div id="toast" class="toast">ØªÙ… Ø§Ù„Ø­Ø°Ù â€” <button id="undoBtn" style="background:transparent;border:0;color:#fff;font-weight:900;cursor:pointer">ØªØ±Ø§Ø¬Ø¹</button></div>

<!-- FOOTER -->
<footer>
  <div style="font-weight:800">ZALABIA & DONUTS</div>
  <div style="margin-top:8px;color:var(--muted)">WhatsApp: <a href="https://wa.me/201125263455" style="color:var(--dark-pink);text-decoration:none;font-weight:800">01125263455</a> â€¢ <a href="#" id="tiktokLink" style="color:var(--muted);text-decoration:none">TikTok</a></div>
  <div style="margin-top:8px;color:var(--muted)" class="footer-links">
    <a href="https://wa.me/201125263455">WhatsApp</a> â€¢ 
    <a id="tiktokFooter" href="">TikTok</a> â€¢ 
    <a href="tel:01125263455">Phone</a>
  </div>
  <div style="margin-top:10px;color:var(--muted)">Â© 2026 All Rights Reserved â€“ ZALABIA & DONUTS</div>
</footer>

<script>
/* ---------- app state ---------- */
let MENU = MENU_DATA.slice();
let CART = JSON.parse(localStorage.getItem('zalabia_cart_full') || '[]');
let lastRemoved = null;
let toastTimeout = null;

/* ---------- helpers ---------- */
const $ = sel => document.querySelector(sel);
const create = (tag, attrs={}) => { const e=document.createElement(tag); for(const k in attrs) e.setAttribute(k, attrs[k]); return e; };
function formatPrice(n){ return n + ' Ø¬.Ù…'; }
function saveCart(){ localStorage.setItem('zalabia_cart_full', JSON.stringify(CART)); }
function calcTotal(){ return CART.reduce((s,i)=>s + (i.price || 0) * (i.qty || 1), 0); }

/* ---------- categories ---------- */
function renderCats(){
  const cats = ['All', ...Array.from(new Set(MENU.map(i=>i.cat)))];
  const box = $('#cats'); box.innerHTML = '';
  cats.forEach((c, idx) => {
    const b = create('button');
    b.className = 'cat';
    b.innerText = (c === 'All' ? 'Ø§Ù„ÙƒÙ„ â€¢ All' : ( c==='Zalabia' ? 'Ø²Ù„Ø§Ø¨ÙŠØ© â€¢ Zalabia' : c + ' â€¢ ' + c ));
    if(idx===0) b.classList.add('active');
    b.onclick = ()=>{ document.querySelectorAll('.cat').forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderMenu(c==='All' ? MENU : MENU.filter(it=>it.cat===c)); };
    box.appendChild(b);
  });
}

/* ---------- render menu ---------- */
function renderMenu(list){
  const grid = $('#grid'); grid.innerHTML = '';
  list.forEach(item=>{
    const card = create('article'); card.className = 'card';

    // left info
    const info = create('div'); info.className = 'info';
    const title = create('div'); title.className = 'title-main';
    const names = create('div');
    const ar = create('div'); ar.className='name-ar'; ar.innerText = item.name_ar;
    const en = create('div'); en.className='name-en'; en.innerText = item.name_en;
    names.appendChild(ar); names.appendChild(en);

    const plusToggle = create('div'); plusToggle.className='open-toggle'; plusToggle.style.cursor='pointer';
    plusToggle.innerHTML = '<span style="font-weight:900;color:var(--muted)">+</span><small style="display:block;color:var(--muted);font-size:12px">ØªÙØ§ØµÙŠÙ„</small>';
    title.appendChild(names); title.appendChild(plusToggle);
    info.appendChild(title);

    // variants
    const variants = create('div'); variants.className='variants';
    item.variants.forEach((v, vi) =>{
      const pill = create('div'); pill.className='variant-pill';
      pill.innerHTML = `<div style="display:flex;flex-direction:column">
        <div style="font-weight:900">${v.label}</div>
        <small style="color:var(--muted)">${v.price} Ø¬.Ù…</small>
      </div>`;
      const addBtn = create('button'); addBtn.innerHTML = '+';
      addBtn.title = 'Ø£Ø¶Ù';
      addBtn.onclick = (ev) => {
        ev.stopPropagation();
        // For items with flavors (mini pancakes) we prompt flavor selection
        if(item.flavors && Array.isArray(item.flavors)){
          const flavor = prompt('Ø§Ø®ØªØ± Ù†ÙƒÙ‡Ø©:\\n' + item.flavors.map((f,i)=>`${i+1}) ${f}`).join('\\n'));
          if(!flavor) return;
          const fi = Math.max(0, Math.min(item.flavors.length -1, (parseInt(flavor)||1)-1));
          addToCart(item, v, 1, { flavor: item.flavors[fi] });
        } else {
          addToCart(item, v, 1, {});
        }
        animateAdd(ev.target);
      };
      pill.appendChild(addBtn);
      variants.appendChild(pill);
    });
    info.appendChild(variants);

    // right controls
    const right = create('div'); right.className='controls-side';
    const price = create('div'); price.className='price'; price.innerText = item.variants[0].price + ' Ø¬.Ù…';
    const qwrap = create('div'); qwrap.className='inline-qty';
    const minus = create('button'); minus.className='qbtn'; minus.innerText='âˆ’';
    const qty = create('div'); qty.style.minWidth='20px'; qty.style.textAlign='center'; qty.style.fontWeight='900'; qty.innerText='0';
    const plusBtn = create('button'); plusBtn.className='qbtn'; plusBtn.innerText='+';
    minus.onclick = ()=>{ let v = parseInt(qty.innerText)||0; if(v>0) qty.innerText = v-1; };
    plusBtn.onclick = ()=>{ let v = parseInt(qty.innerText)||0; qty.innerText = v+1; };
    qwrap.appendChild(minus); qwrap.appendChild(qty); qwrap.appendChild(plusBtn);

    const addAll = create('button'); addAll.className='add-btn'; addAll.innerText = 'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©';
    addAll.onclick = ()=>{
      const q = parseInt(qty.innerText) || 0;
      if(q<=0){ alert('Ø§Ø®ØªØ± Ø§Ù„ÙƒÙ…ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹'); return; }
      // if flavors, prompt each add for flavor selection or choose default first flavor
      if(item.flavors && item.flavors.length){
        const flavor = prompt('Ø§Ø®ØªØ± Ù†ÙƒÙ‡Ø©:\\n' + item.flavors.map((f,i)=>`${i+1}) ${f}`).join('\\n')) || 'Ù†ÙˆØªÙŠÙ„Ø§';
        const fi = Math.max(0, Math.min(item.flavors.length -1, (parseInt(flavor)||1)-1));
        addToCart(item, item.variants[0], q, { flavor: item.flavors[fi] });
      } else {
        addToCart(item, item.variants[0], q, {});
      }
      qty.innerText = '0';
    };

    right.appendChild(price); right.appendChild(qwrap); right.appendChild(addAll);
    card.appendChild(info); card.appendChild(right);

    // toggle details
    plusToggle.onclick = ()=>{ if(variants.style.maxHeight){ variants.style.maxHeight = null; variants.style.overflow = null; } else { variants.style.maxHeight = 'none'; variants.style.overflow = 'visible'; } };

    grid.appendChild(card);
  });
}

/* ---------- cart handling ---------- */
function addToCart(item, variant, qty=1, meta={}){
  // Try to merge identical item (same id + variant + flavor)
  const key = item.id + '||' + variant.label + '||' + (meta.flavor || '');
  const idx = CART.findIndex(c => c.key === key);
  if(idx >= 0){
    CART[idx].qty += qty;
  } else {
    CART.push({
      key,
      id: item.id,
      name_ar: item.name_ar,
      name_en: item.name_en,
      variant: variant.label,
      price: variant.price,
      qty: qty,
      meta: meta
    });
  }
  saveCart(); renderCartCount(); flashCart(); renderCart(); updateStickyTotal();
}

function renderCartCount(){ $('#cartCount').innerText = CART.reduce((s,i)=>s+i.qty,0); }
function toggleDrawer(){ const d = $('#drawer'); d.classList.toggle('show'); renderCart(); }
function renderCart(){
  const list = $('#cartList'); list.innerHTML = '';
  if(CART.length === 0){ list.innerHTML = '<div style="padding:18px;color:var(--muted)">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>'; $('#cartTotal').innerText = '0 Ø¬.Ù…'; return; }
  let total = 0;
  CART.forEach((c, idx)=>{
    const row = create('div'); row.className = 'cart-item';
    const meta = create('div'); meta.className='meta';
    const flavorLine = c.meta && c.meta.flavor ? `<div style="font-size:13px;color:var(--muted)">${c.meta.flavor}</div>` : '';
    meta.innerHTML = `<div style="font-weight:900">${c.name_ar} <span style="font-weight:600;color:var(--muted)">â€” ${c.name_en}</span></div>${flavorLine}<div style="font-size:13px;color:var(--muted)">${c.variant}</div>`;
    const right = create('div'); right.style.textAlign='right';
    right.innerHTML = `<div style="font-weight:900">${formatPrice(c.price * c.qty)}</div>`;
    const controls = create('div'); controls.style.display='flex'; controls.style.gap='8px'; controls.style.marginTop='8px'; controls.style.justifyContent='flex-end';
    const minus = create('button'); minus.className='remove-btn'; minus.innerText = 'âˆ’';
    const qty = create('div'); qty.style.minWidth='26px'; qty.style.textAlign='center'; qty.style.fontWeight='900'; qty.innerText = c.qty;
    const plus = create('button'); plus.className='remove-btn'; plus.innerText = '+';
    const del = create('button'); del.className='remove-btn'; del.innerText = 'Ø­Ø°Ù';
    minus.onclick = ()=>{ if(c.qty>1){ c.qty--; saveCart(); renderCart(); renderCartCount(); updateStickyTotal(); } else removeFromCart(idx); };
    plus.onclick = ()=>{ c.qty++; saveCart(); renderCart(); renderCartCount(); updateStickyTotal(); };
    del.onclick = ()=>{ removeFromCart(idx); };
    controls.appendChild(minus); controls.appendChild(qty); controls.appendChild(plus); controls.appendChild(del);
    right.appendChild(controls);
    row.appendChild(meta); row.appendChild(right);
    list.appendChild(row);
    total += c.price * c.qty;
  });
  $('#cartTotal').innerText = total + ' Ø¬.Ù…';
  renderCartCount();
  updateStickyTotal();
}

function removeFromCart(idx){
  lastRemoved = { item: CART[idx], index: idx };
  CART.splice(idx,1);
  saveCart(); renderCart(); renderCartCount(); showToast('ØªÙ… Ø§Ù„Ø­Ø°Ù');
  updateStickyTotal();
}
function undoRemove(){
  if(!lastRemoved) return;
  CART.splice(lastRemoved.index,0,lastRemoved.item);
  saveCart(); renderCart(); renderCartCount(); lastRemoved = null; hideToast(); updateStickyTotal();
}
function clearCart(){
  if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ')) return;
  CART = []; saveCart(); renderCart(); renderCartCount(); updateStickyTotal();
}

/* ---------- ordering ---------- */
function generateMessage(){
  if(CART.length === 0) return '';
  let msg = `Hello ZALABIA & DONUTS%0AOrder:%0A`;
  let total = 0;
  CART.forEach((c,i)=>{
    const meta = c.meta && c.meta.flavor ? ` (${c.meta.flavor})` : '';
    msg += `${i+1}) ${c.name_ar} - ${c.variant}${meta} x${c.qty} = ${c.price * c.qty} Ø¬.Ù…%0A`;
    total += c.price * c.qty;
  });
  msg += `%0ADelivery Phone: `;
  msg += `%0ATotal: ${total} Ø¬.Ù…`;
  return msg;
}
function orderWhatsApp(){
  const msg = generateMessage();
  if(!msg){ alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'); return; }
  // open wa.me with prefilled message (customer to add their phone in message)
  const url = `https://wa.me/${CONTACT.full}?text=${encodeURIComponent(msg)}`;
  window.open(url,'_blank');
}
function orderPhone(){ window.location.href = 'tel:' + CONTACT.local; }

/* ---------- ui niceties ---------- */
function animateAdd(target){
  try {
    const rect = target.getBoundingClientRect();
    const cart = $('#cartFloat').getBoundingClientRect();
    const dot = document.createElement('div');
    dot.style.position='fixed'; dot.style.width='14px'; dot.style.height='14px'; dot.style.borderRadius='50%';
    dot.style.left=(rect.left+rect.width/2)+'px'; dot.style.top=(rect.top+rect.height/2)+'px';
    dot.style.background='radial-gradient(circle at 30% 30%, #fff, var(--deep-pink))'; dot.style.zIndex=99999;
    document.body.appendChild(dot);
    const dx = (cart.left + cart.width/2) - (rect.left+rect.width/2);
    const dy = (cart.top + cart.height/2) - (rect.top+rect.height/2);
    dot.animate([{ transform:'translate(0,0) scale(1)', opacity:1 }, { transform:`translate(${dx}px, ${dy}px) scale(.2)`, opacity:0.3 }], { duration:600, easing:'cubic-bezier(.2,.9,.3,1)' });
    setTimeout(()=>dot.remove(),700);
  } catch(e){}
}
function flashCart(){ const c = $('#cartFloat'); c.animate([{ transform:'scale(1)' },{ transform:'scale(1.08)' },{ transform:'scale(1)' }], { duration:360, easing:'ease-out' }); }

/* toast */
function showToast(msg){ const t = $('#toast'); t.classList.add('show'); t.firstChild && (t.firstChild.nodeValue = msg); $('#undoBtn').onclick = ()=>{ undoRemove(); }; clearTimeout(toastTimeout); toastTimeout = setTimeout(()=>{ hideToast(); lastRemoved = null; }, 6000); }
function hideToast(){ $('#toast').classList.remove('show'); }

/* search */
$('#search').addEventListener('input', (e)=>{
  const q = e.target.value.trim().toLowerCase();
  if(!q){ renderMenu(MENU); return; }
  const filtered = MENU.filter(it=>{
    return it.name_ar.includes(q) || it.name_en.toLowerCase().includes(q) || it.cat.toLowerCase().includes(q) || (it.flavors && it.flavors.some(f=>f.includes(q)));
  });
  renderMenu(filtered);
});

/* sticky total */
function updateStickyTotal(){ $('#stickyTotal').innerText = 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ' + (calcTotal() || 0) + ' Ø¬.Ù…'; }

/* init */
function init(){
  renderCats();
  renderMenu(MENU);
  renderCart();
  renderCartCount();
  updateStickyTotal();
  window.addEventListener('beforeunload', saveCart);
  // tiktok links
  document.getElementById('tiktokLink').setAttribute('href', TIKTOK_URL);
  document.getElementById('tiktokFooter').setAttribute('href', TIKTOK_URL);
}
init();

/* expose */
window.zal = { MENU, CART, addToCart, renderMenu };
</script>
</body>
</html>
